PLC可编程控制器教程
伊宏业
航空工业出版社

顺序控制，无节点顺序控制，矩阵控制

PLC，可编程逻辑控制器, Programmable Logic Controller. 
分类，70年代后成为可编程控制器，Praogammable Controller
国际电工委员会， IEC，定义PLC为，一种数字运算操作系统，专门为工业控制而设计

PLC特点，功能完善，面向对象语言编程，高可靠性

直接数字控制，DDC， Direct Digital Control
计算机控制系统,DCS， Distribution Control System

PLC分类，小型PLC,  I/O从20-128点；中型，129-512点；大型，513点以上
结构上分为，整体，模块和叠装三种

主要产品，日本三菱的F系列，FX系列；日本OMORON(欧姆龙）即日立的C系列；美国的MIDICON的984系列

开关输入模块SI，各种信号需要转换为TTL点评以后才可与计算机联系，直接输入，隔离输入
开关量输出SO,直流输出，交流输出，继电器出书
模拟量输入模块,CD4051（场效应管）组成的8路开关，数据放大器高公模抑制比>10^6

常用温漂运放，AD542,AD522,LH0038,BB3400,ADOP-07,TP1702

A/D转换器类型，逐次A/D转换器，直接比较A/D转换器，双积分，压频比

脉冲输入模块PI

在线编程，编程器与PLC上专用插座相连，实施编程。离线编程，先写程序，后链接编程器
编程器种类，手携式，带有显示器的，通用计算机
工作方式，编程，监控，运行

PLC程序执行过程，输入扫描（检查输入输出状态），程序执行，输出更新
一般输入扫描数度用执行1000步指令所用的时间来衡量

编程语言，梯形语言，助记语言，功能表或支持的高级语言

梯形语言，左侧线为母线，左侧安排输入节点和中续继电器，右侧为输出，每个节点都有自己的特殊编号，左右侧之间的部分节点可以随意串并联，输出不可以串联，程序结束要有结束符

助记符号语言，类似于汇编

三菱F系列

编号，为了变成方便为每个PLC内部元件（如，AD,继电器，定时器，计数器等）进行编号
输入继电器，用XN表示N为八进制数字，例如F1-20M可以使用的编号为X000-X013。
            输入继电器只能由外部输入驱动不能由程序驱动。
输出继电器，用YN表示N为八进制数字，用于将信号传送到执行部件
辅助继电器，运算中间的继电器（即程序模拟），结果只能通过输出继电器进行执行
            通用辅助继电器MN，N为3位八进制编号,M100-M177, M200-M277,共128点
            保持辅助继电器，具有锂电池备用供电，M300-M377 64个点
移位寄存器，通过一位指令可以将辅助寄存器做为移位寄存器使用，只能按组使用。
定时寄存器，T050-T057, T450-T457,24点0.1-999s，3位数字设定值；
            T550-T557,T650-T657，8点0.01-99.9s，3位数字设定
计数器，    使用C表示，每个计数器均有断电保护C460-C467 C560-C567
特殊辅助继电器，M70程序运行监视,可以通过输出继电器对M70状态输出，以提供外部监视
                M71初始化脉冲，相当于复位
                M72  0.1s的时钟脉冲，50ms通，50ms断
                M73  10ms时钟，通断个半
                M76  电池电压下降
                M77  禁止全部输出，当其接通所有Y断开，一般用于异常状态保护
                M574 锁定所有状态，用于掉电保护系统状态
                M575 返回启动状态

基本逻辑指令，F1系列PLC
连接线全输出指令集
LD,（load）常开节点与母线建立连接
LDI，（load inverse）常闭节点与母线建立连接
OUT, （线圈驱动指令）
其中LD,LDI可以用于X, Y, M, T, C, S； OUT用于Y, M, T, C, S, F

连接点串联指令
AND,常开节点串联指令
ANI, (And Inverse),常闭节点串联指令

并联指令
OR,连接常开；ORI，连接常闭
连接都应节点, X, Y, M, T, C, S

串联电路块的并联指令
ORB，Or block, 用于分支电路的并联指令（即串联电路块的并联指令），孤立指令
并联电路的串联指令
ANB，And block,即并联电路与前面电路串联指令，孤立指令
其中ORB与ANB指令包含的支路数不能超过8

其中LD与OUT相当于HTML文档中的标签，有LD就一定要有一个或多个OUT与其对应，切最后的OUT一定是实际输出节点，即Y节点

自保持与接触指令（S/R)
S, Set, 操作保持指令
R, Reset, 操作保持的接触（即复位指令）
当R,S同时对一个节点作用是，R指令优先即保持断开

脉冲输出指令
PLS， Pulse, 只能用于辅助继电器M，而不能用于驱动其他线圈，
起作用时只工作一个扫描周期。如果脉冲输出期间适用转移指令使得PLS指令转移，则该脉冲输出仍保持接通。脉冲触发为上升沿触发
可将PLS指令用于计数器，移位寄存器的复位输入以克服复位优先带来的矛盾

计数器复位指令
RST,计数器复位指令。计数器元件有两个输入端，一个是作为计数（CN同继电器），一个作为复位。所有计数器均有掉电保护功能，复原时要使用初始化脉冲M71

通过定时器可以制作延时断开，延时接通，闪烁等电路

移位寄存器移位与复位指令
SFT/RST， Shift/Reset, 移位寄存器有三个输入，OUT,SFT,RST
数据输入，由OUT指令构成，由输入继电器给出输入量
移位输入，由SFT指令构成，由起始继电器按地址顺序唯一，最后一位溢出
复位输入，由RST指令构成，复位后除首位（与输入连接的）外其他后续继电器归零（断开）
          首位状态由输入继电器决定
移位寄存器器件，SFT,RST：M100, M120, M140, M160, M200, M220, M240, M260, M300,
M320, M340, M360

主控指令与主控恢复指令（MC/MCR)
MC，Master Control, 用于公共串联节点连接, 相当于建立了一个新的母线
MCR, Master Control Reset, 主控恢复指令，用于MC指令的复位，撤销新母线
MC的条件状态（即锁链继电器断开时），MC与MCR之间的继电器状态为，通用与输出继电器断开，定时器复位，计数器与保持辅助继电器保持现有状态
MC,MCR指令对象，M100-M177, 使用时也是类似与LD/LDI与OUT的标签关系

空操作指令
NOP,可以用于占机时或修改电路图时占位，但当占位指令时应防止更改电路组态，NOP用法是在继电器位置，例如AND NOP

条件转移与转移结束
CJP/EJP, Condition jump / End of Jump, 用于跳转过CJP与EJP之间的指令并保持，必须配对
转移指令相当于中断处理，切多个相同的EJP指令时最后一个起作用，而多个CJP可指向同一个EJP。切CJP/EJP可以完成跳入主控程序段中（即MC,MCR之间的程序段中，切与MC指定的输入状态无关）
语法是CJP/EJP N， 相当于C语言的GOTO语句

程序结束指令
END,PLC的工作方式为循环扫描方式一般000-999为一个循环周期，加入END则可在000-END之间循环执行

编程的一些规则
1.只有热继电器节点可以放在线圈的右侧，线圈不可以接左侧母线
2.同一线圈可以多次不同输出，但要避免，容易引起问题
3.梯形图为单向，不可以桥接

编程技巧
1.先写最长的串联语句，可以节省存储空间
2.先写并联电路，可节省存储空间
3.如需要桥式电路可以用等效的方法替换

步进梯形指令，是由状态转移图设计梯形图的一种指令
使用状态图必须使用S指令来设置状态，STL指令来载入状态例如
LD X400
S S600
STL S600
OUT Y430
RET
状态输出STL，可以驱动的器件为，M, Y, T, S，且状态输出只有常开节点
遇到状态转移跳转时，旧状态复位，新状态值位，输出为M,Y在转移时要保持可使用S，复位用R
只要在不相邻的步进段可以使用相同的计时器
初始状态可以由M71或其他信号值位，运行到最后时由RET复位，等待下一次初始信号启动
使用状态的好处，起始状态启动后即锁定，只有整个过程运行完之后才可以再次启动，而且状态时断电保持的，若需要断电重新启动则需要使整个过程的所有状态一起复位
状态的复位，需要使用功能线圈（即有特殊功能的输出线圈）来完成，名称为FN，如F670-671
如果不需要断电复位则状态内部值位的继电器应全部选择断电保持的内部继电器MN
状态禁止，可以使用特殊继电器M574来禁止状态切换暂时停止状态转移
状态也可以作为一般中续继电器使用，这是就不再提供输出STL。也不用S指令
状态指令特点，S与STL需要配对出现，有S才提供步进控制
STL是与LD/LDI一样从母线引出节点的指令，后接的指令为OUT或S，步进指令结束要使用RET
步进指令可以有效的从状态图转变为程序代码，简化编程，步进指令的跳转与普通指令的CJP/EJP不同，跳转时根据状态的输入条件而改变的，即状态转移不需要CJP/EJP指令

编程器
PLC，基本单元的运行于停止，由RUN与COM之间的开关端子实现
有PROGRAM和MONITOR两种运行状态
编程方法为，编程器插在基本单元上，基本单元要设置在STOP停止状态，编程器开关在MONITOR.运行编辑好的程序，基本单元设置RUN状态，而编程器设置在PROGRAM
编程时无须输入X, Y, M, C, T这些器件的功能标识
面板中ON/OFF用于指示在器件监控指令时器件的状态
面板中ACT用于指示一个触电接通还是断开
STEP用于指示步序号，INSTR用于显示当前指令DATA用于显示器件号或场数值

编程之前清除程序，CLEAR -> STEP 0 -> ... -> STEP N_END -> DEL -> INSTR

查找指令,CLEAR->指令->SEARCH, 查找下一个可以继续按SEARCH

求和校验，用的是监视警戒线路，用于检查数据是否出错，这里主要是指程序存储器中的数据求和，并检查结果是否为一个常数

双线圈检查，用于检查在同一器件有多次输出时，检验程序是否有弊端使得开启的同时又关闭

监控操作，程序检查无误后可进行在线监控查看程序运行，基本单元设置为RUN，编程器选择设置在MONITOR
器件监控，例如监控计数器则显示计数值，CLEAR->器件号->MONITOR
指令监控，不能监控具有跳转指令的操作
在监控的同时可以随时键入新值，CLEAR->器件号->MONITOR->数值->WRITE
监控时可以强迫继电器联通或断开，计时器复位等，CLEAR->器件号->MONITOR->S/R->



欧姆龙系列PLC
具有常用的数据处理系统，灵活的互联RS-232C，RS-422标准接口或光纤通信

分类
微型，C-20P,C28P,C40P,C60P,120点
小型，C120,C200H256点最多384点
中型，C500, 512点和1024点
大型，C2000H可达2048点

扩展，C200H最多可以配置两个远程I/O主单元，5个系统I/O从单元。
C200H除了普通I/O意外可以接其他智能模块，最大数量为10个

数据存储器分类，I/O继电器区，内部辅助继电器区，专用继电器区，暂存继电器区，保持继电器区，保持继电器，辅助存储继电器，链接继电器，定时/技术继电器，动态数据存储
继电器用标识符几2-4个符号组成，而且可以进行位寻址

I/O继电器区，000-029不使用的I/O继电器可以作为内部继电器使用
是外部的输入输出映射区，具体I/O号由安装木板的插孔位置决定，C200H母板10个I/O槽，可再扩展2个外部母板共20个槽，地址为000-029，同时I/0也可以进行位访问按位访问的地址号为5位，000对应00000-00015即在3位I/O地址后加上2位位地址

内部继电器区,IR，Internal Relay Area, 030-250,做为内部中间变量使用，但做输出线圈时
只能使用一次，做输入线圈可以任意使用

专用继电器区，SR，Special Relay Area, 用于监视PLC的工作状态，产生时钟脉冲，错误等
地址范围251-255，各区状态由PLC自动写入，用户只能读取状态可以按位访问
时钟脉冲，继电器号25400，1分钟； 25401，0.02秒； 25500，0.1秒； 25501，0.2秒；25502，1.0秒

保持继电器HR，Holding Relay Area, 保持继电器在电源切断或向PROGRAM转换时仍能记忆
原来的ON/OFF状态。通道号HR00-HR99，使用时也可按位访问，必须加HR

暂存继电器TR，Templorary Relay Area, TR只包含8位只可以与LD和OUT连用，用于存储分支点
数据，使用时地址号前加TR，寻址范围TR00-TR07，程序的不同分支内可以重复使用同一个TR号

辅助继电器AR，Auxiliary Relay Area, AR寻址范围AR00-AR27通道，需要在区号前加AR，其中
AR07-AR22同保持继电器一样，可由用户使用；通道AR00-AR06和AR23-AR27有特殊功能

链接继电器LR(Link Relay Area)
LR寻址范围LR00-LR63通道，用于在数据通信时进行数据交换，否则可以作为辅助寄存器使用

定时/计数继电器TC（Timer/Counter Area)
TC区提供了512个定时器或计数器，地址为000～512，只能使用通道形式访问，不能使用相同的编号

动态数据区DM(Data Memory Area)
寻址范围DM0000～DM1999通道，只能以通道形式访问，不能用于位操作其中DM0000～DM0999为可读/可写的数据存储区，DM1000～DM1999为只读存储器，只能由系统写入或者用户编编程器的通道修改










