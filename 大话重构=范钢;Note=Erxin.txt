大话重构=范钢;Note=Erxin

# 重构，改变既有代码的良药
- 修改软件的四个动机
新功能
修BUG
改善结构
优化系统


# 重构的工具箱
- 小步快跑，helloWorld重构举例

# 实践
- 分解超级大函数， 第一步

# 拆分大对象， 第二步
- 抽取类与指责驱动设计
- SRP 

# 提高代码复用率， 第三步
- DRY 原则
- 重复代码在不同对象中， 则抽取类或封装为实体类
- 并列关系，抽取父类
- 继承泛滥则抓换为组合
- 代码分割碎片， 继承结合模板

# 发现程序可扩展点， 第四步
- OCP, open close principle
- AOP

# 降低程序依赖度， 第五步
- 接口、实现与工厂模式
- 工厂， 就是接口对应的实现映射，IoC 
- 依赖反转，具体实现依赖接口， DIP，低层次类依赖于高层次抽象类
- 外部接口与适配器模式
- 继承的泛滥与桥接模式，将原有的因两个变化而形成的继承改写为组合
- 方法的解耦与策略模式
- 过程的解耦与命令模式
- 透明的功能扩展设计，组合模式与装饰模式

# 分层，第六步
- web系统分成结构
UI -> MVC -> BUS -> DAO -> DB 
   Obj-value pair 
   infrastructure 

# 领域驱动设计， 第七步
   
# 一次完整的重构过程， 遵循1-7步过程

# 什么时候重构
- 重构是一种习惯
- 先重构再扩展

# 测试驱动开发
- TDD， TAD， test after development 

# 全面的升级任务
- 风险驱动设计， 以风险分析识别为核心，用小的代价完成最紧迫的风险任务
- 领域驱动设计，

# 测试的困境
- 自动化测试

# 评价软件的标准
- 每个类方法复杂度
- 继承树深度
- 子类数量
- 类的耦合度
- 方法中缺乏内聚
- 传入耦合度
- 类中公共方法数量

















































