TruClient Online Document;Note=Erxin

# Introduction
## General introduction 
- 12.55 reference 
https://admhelp.microfocus.com/tc/en/12.55/Content/Resources/_TopNav/_TopNav_Home.htm

- What is Vuser script?
Steps, structures contain user action 
    + actions
    + function call 
    + flow control 

Actions contains a series of steps, generally corresponds to a business process of your app 

Run logic, the flow of your script, meaning the order actions run in and the number of times they run 

- Develop a script in interactive mode 
    + record 
    + replay 
    + enhance 
    + replay 
    
- Run in load mode with other products 
AppPulse 
APM, former BSM 
LoadRunner 
Performance Center 
StormRunner Load 


## What's new 
- Improvement 
- Convert actions to code 
- Object identification support modify in step options 
- Interactive script development 
    + configure wait step into transaction 
    + play until this 
    + populate global watch panel 
    + none standard file upload 
    + disable creating alternative steps 
    + control step level 
    + add milliseconds arguments to wait step 

- APIs 
    + new AUT API, AUT.window, AUT.document 
    + network and event filtering 
    + JS regular expression as the first URL Utils.addAutoFilter 
    
- TruClient Lite, import client side certificate 
- Browser version support 
    + Chromium 55 
    + TC IE 
    
- TruClient native mobile 
https://admhelp.microfocus.com/mobilecenter/en/latest/Content/Resources/_TopNav/_TopNav_Home.htm

- Integration with network visualization 
    + reference, http://nvhelp.saas.hpe.com/en/nv-perform/en/latest/help/Content/Report/Report_Overview_Integ.htm
    
    
## TruClient Editions 
- in Vugen 
- Standalone 
- Lite 
- Major difference 
Feature 	        in VuGen 	Standalone 	Lite
OS Support 	            Windows 	Windows 	Windows, MAC
Functions 	            Supported 	Supported 	Partially
Properties 	            Supported 	Supported 	Not supported

Extra files:            Supported  Supported   Not available 
function.js                         direct edit  
globals.h                           in script 
JS-functions.js                     folder 

Log viewer 	            VuGen>Output Not available 	Not available
NV                      Available 	Not available 	Not available

Network Section         VuGen>RTS 	Not available 	Not available
Speed Simulation
Download filters

Custom extra files 	    Available 	Not available 	Not available
Convert2Web (HTTP/HTML) Available 	Not available 	Not available
Mobile Device Emulation 	Available 	Available 	Not available


## TruClient standard alone requirements and installation 
- System requriements 
- Standalone installer 
    + AppPulse, https://software.microfocus.com/en-us/software/customer-technical-support-services
    
    + Business Management Services, https://software.microfocus.com/en-us/software/customer-technical-support-services
    
- Standalone support convet TC2Web

## TruClient lite
- upload file path need to manually changed from mac to window vice versa 

## Script and file management 
- support zip or script 
- lite save as zip 
- certificate in lite 
To record or replay a script that uses a client-side certificate in TruClient Lite, the certificate must be installed on the system certificate repository.

When TruClient Lite for Chrome uses the certificate you installed in the system certificate repository, a dialog box asks the user to select a certificate,

To avoid display of the certificate display dialog box, after installing the certificate add a key using regedit. To HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Chrome\AutoSelectCertificateForUrls, add a string value key named "1", with value “{"pattern":"*","filter":{}}”


## Performance metrics 
- The following performance metrics can be recorded 
    + end to end transaction response time, includes client time and browser rendering time 
    + web page component break down, web page and resources 
    + HAR, a standard HAR file 
    + throughput, count of bytes transferred between the browser and the server 
    + hits, count of http requests sent from the client 
    + connections, count of connections opend by the browser to server 
    
- Online and local help centers 


# Fundamentals 
## TruClient step structure 
- Step editor 
step level 
optional step, in the event that the step can not find its object, the script continues without return an error 
alternative step, indicate a step wihch can be redefined in alternative ways

- step section user interface elements 
action, the action that define the step 
object timeout, in second 
step timeout, in second 
minimum time, in second 
end event, can be automatic(not set yet, timers end), action complete, dom content loaded, step synchronous network completed, document load, object exists, step network completed, dialog opened 

- arguments section 
plain values, text 
javascript expression 
name of a parameter 

- object section user interface elements 
highlight 
replace 
roles, the functions that TruClient understands about an object, the list of avaliable action is defined by the role. read-only 
name
id method, identifying method. automatic, xpath, javascript, descriptors 
related object, in relation to an anchor object 

- xpath and javascript object id method 
    + click regenerate expression and select object to regenerate xpath 
    
    + evalXPath in js returns an array of the object defined by xpath 
    
    + you can modify the suggested xpath to return a different list 
    
    + use TruClient random function to return a random element, random(document.getElementsByTagName("myArray"))
    
- Transactions selection 
- Understand end events, the end event occurs the next step can start while the current step continues in the background. The end event for each step is set by TruClient for each browser the first time the script is replayed 

- Events in a typical step 
Step container 
                        -> step start 
                        -> action start 
    |Action             -> action completed 
                        -> DOM content loaded 
    |Additional action  -> step sync network completed 
                        -> document loaded 
                        -> step network completed 
                        -> dialog opened 
                        -> step completed 
                        -> dialog opened 
                        -> step completed 
                        -> after step ended 
                        
- end events, run times, and transaction times on different browsers 

    + if a transaction includes steps with different end events on different browsers, the transaction time may be different between browsers 
    
    + To adapt script to all browsers you may need if browser step to differentiate the end end types 

- when to manually change step end events 
    + You want to start the next step in your script once a specific object is visible on the screen 
    + end event different between browser 
    

## TruClient user interface 
- TruClient user interface overview 
- TruClient user interface components 
main window 
toolbox 
status 
tabs 
menu bar 
context menu 

- actions tab, add action 
- function libraries tab
new library 
save global library 

- menu bar 
    + convert to code 
    + transaction editor 
    + event handler editor 
    + general settings 
    + parameters 
    + snapshot viewer 
    + windows, opens the replay window which tells you which window to look for a object 

- run logic tab, can not be deleted 
    + init block 
    + run block 
    + end block 
    
- run logic steps 
- toolbox 
    + functions
    verify 
    verify pdf content 
    wait 
    wait for object 
    generic object, browser and api actions 
    call function 
    
    + flow control 
    for loop 
    if block 
    add else 
    if exists 
    if verify break 
    continue 
    catch error 
    exit 
    
- misecllaneous 
    evaluate js 
    evaluate js on object, the object is referenced by 'object' 
    evaluate C, defined in functions.c file 
    comment 
    rendezvous, synchronize all vusers in a controller scenario to run a specified step at the same time 
    
- keyboard shortcuts 
                        

## Browsers in TruClient
- Replaying on all browsers, difference between browsers 
render time 
step end event 
object identification 
authentication 
differences in feature sets between browsers 

- testing on different browsers 
analysis support compare transaction response time between browsers 

- troubleshooting issues replaying a script across browsers, use if browser to handle 
end events 
object identification 
security, if authentication or a client certificate is required in only some of the browsers drag a authentication step into the if browser step 

- private browsing, not save password, cookies and history 
- TruClient browser for internet explorer 
    + The TruClient Browser for IE (Internet Explorer) simulates the functionality of an IE browser.
    
    + IE cache management, Use the IE Cache Enabler tool to implement the IE cache simulation mechanism on every Load Generator, Controller or BPM agent machine that runs TruClient IE scripts.
    
    <Installation folder\bin> run HPETruClientCacheEnabler.exe 
    
    disable/enable IE cache simulation

    + TruClient IE does not support DOMStorage and AppCache cache separation for virtual users.
    
- Firebug lite,  Advanced > Firebug Lite or by pressing F12 while in TruClient's IE browser.

- TruClient for IE can only record and replay applications in Standards Mode.

can temporarily deactivate enforcement by deselecting Advanced > Enforce Standards Mode. 

- Enable the negotiate method for authentication 
If your application server supports only the negotiate method for authentication (the HTTP response is with "HTTP/1.1 401 Unauthorized" and "WWW-Authenticate: Negotiate"), you must enable the negotiate option. To do so:

Open the registry setting HKEY_CURRENT_USER\Software\Hewlett-Packard\TruClient\TruClientIE\TCWindows\CurrentVersion\Internet Settings.

Change the value of the EnableNegotiate registry key from "0" to "1".

- limitation
    + If you are using Windows 10 and you launch the TruClient IE browser, the system's proxy settings are changed to the settings specified in TruClient IE 
    
    + The system proxy might be used instead of a proxy specified in the script when running more than one Vuser on a Windows 10 load generator.

- Differences between supported browsers 
cleint certificate 
diagnostics j2ee and .net app 
ssl connections 
responsive design based application, using recorded window size 
verify pdf record snapshots 
modem speed emulation 


# Develop scripts 
- 




